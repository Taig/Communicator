machine:
  services:
    - docker

dependencies:
  pre:
    - docker login -e $DOCKER_HUB_EMAIL -u $DOCKER_HUB_USER -p $DOCKER_HUB_PASSWORD
  override:
    - docker pull taig/communicator:latest || true

test:
  override:
    - docker build -t taig/communicator:latest .
    - docker push taig/communicator:latest
    - docker run -e CODECOV_TOKEN=$CODECOV_TOKEN --entrypoint="./test.sh" taig/communicator

#general:
#  artifacts:
#    - target/scala-2.11/coverage-report
#
#test:
#  override:
#    - sbt ";clean;coverage;test;coverageReport;tut;coverageAggregate"
#  post:
#    - pip install --user codecov && codecov